var stage=document.querySelector("canvas"),cb=stage.getBoundingClientRect(),ctx=stage.getContext("2d"),ratio=window.devicePixelRatio||5,mouse={x:0,y:0},dots=[],wide=36,high=wide/2.2,size=40,padding=40;function create(){for(var t=-1;++t<wide;)for(var e=Math.floor((cb.width-2*padding)/(wide-1)*t+padding)*ratio,i=-1;++i<high;){var n=Math.floor((cb.height-2*padding)/(high-1)*i+padding)*ratio;dots.push({x:e,y:n,ox:e,oy:n})}}function render(){ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),ctx.fillStyle="rgba(189,189,189 ,1)";for(var t=0;t<dots.length;t++){var e=dots[t],i=getV(e);ctx.beginPath(),ctx.moveTo(e.x,e.y),ctx.lineTo(e.x+i.x,e.y+i.y),ctx.strokeStyle="transparent",ctx.lineWidth=.1*ratio,ctx.stroke(),ctx.closePath()}for(var t=0;t<dots.length;t++){var e=dots[t],i=getV(e);ctx.circle(e.x+i.x,e.y+i.y,e.size*ratio,!0),ctx.fill()}}function getV(t){var e=getDistance(t,mouse);return t.size=(200-e)/35,t.size=t.size<1?1:t.size,t.angle=getAngle(t,mouse),{x:(e>20?20:e)*Math.cos(t.angle*Math.PI/180),y:(e>20?20:e)*Math.sin(t.angle*Math.PI/180)}}function getAngle(t,e){var i,n=e.x-t.x;return Math.atan2(e.y-t.y,n)/Math.PI*180}function getDistance(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}window.onmousemove=function(t){mouse.x=t.pageX*ratio,mouse.y=t.pageY*ratio},window.onresize=function(){ctx.canvas.width=window.innerWidth*ratio,ctx.canvas.height=window.innerHeight*ratio,cb=stage.getBoundingClientRect()},window.onresize(),create(),CanvasRenderingContext2D.prototype.circle=function(t,e,i){this.beginPath(),this.arc(t,e,i,0,2*Math.PI,!1),this.closePath()},window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},function t(){render(),requestAnimationFrame(t)}();